=== Relay Node Test Suite â€” Sun Feb  8 21:10:29 UTC 2026 ===

--- 01_basic_relay ---
Expanding scenario: /home/lever65/monerosim_dev/monerosim/20260208_tests/01_basic_relay.scenario.yaml
Expanded /home/lever65/monerosim_dev/monerosim/20260208_tests/01_basic_relay.scenario.yaml -> /home/lever65/monerosim_dev/monerosim/20260208_tests/01_basic_relay.expanded.yaml
  Agents: 13
  Bootstrap ends: 4h
  Activity starts: 5h
OK
[2026-02-08T21:10:29Z INFO  monerosim] Starting MoneroSim configuration parser v2
[2026-02-08T21:10:29Z INFO  monerosim] Configuration file: "/home/lever65/monerosim_dev/monerosim/20260208_tests/01_basic_relay.expanded.yaml"
[2026-02-08T21:10:29Z INFO  monerosim] Output directory: "/home/lever65/monerosim_dev/monerosim/20260208_tests/01_basic_relay_shadow"
[2026-02-08T21:10:29Z INFO  monerosim::config_loader] This appears to be an agent configuration without nodes section. The new parser will handle this correctly.
[2026-02-08T21:10:29Z INFO  monerosim::config_loader] Loading configuration from: "/home/lever65/monerosim_dev/monerosim/20260208_tests/01_basic_relay.expanded.yaml"
[2026-02-08T21:10:29Z INFO  monerosim::config_loader] Detected agent-based configuration
[2026-02-08T21:10:29Z INFO  monerosim::config_loader] Configuration validated successfully
[2026-02-08T21:10:29Z INFO  monerosim] Cleaning up previous simulation state
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-user-040
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-user-039
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-user-038
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-user-037
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-user-036
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-user-035
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-user-034
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-user-033
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-user-032
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-user-031
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-user-030
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-user-029
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-user-028
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-user-027
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-user-026
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-user-025
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-user-024
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-user-023
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-user-022
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-user-021
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-user-020
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-user-019
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-user-018
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-user-017
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-user-016
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-user-015
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-user-014
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-user-013
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-user-012
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-user-011
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-user-010
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-user-009
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-user-008
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-user-007
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-user-006
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-miner-005
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-miner-004
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-miner-003
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-miner-002
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale daemon data directory: /tmp/monero-miner-001
[2026-02-08T21:10:29Z INFO  monerosim] Removing stale shared ring database: "/home/lever65/.shared-ringdb"
[2026-02-08T21:10:29Z INFO  monerosim] Running in agent-based simulation mode
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned dynamic IP 192.168.0.10 to agent dnsserver using global registry
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned dynamic IP 192.168.0.110 to agent miner-001 using global registry
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for miner-002: Could not assign unique IP for agent miner-002. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.11 to agent miner-002
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for miner-003: Could not assign unique IP for agent miner-003. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.12 to agent miner-003
[2026-02-08T21:10:29Z INFO  monerosim::orchestrator] Created DNS server at 192.168.0.10
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for miner-001: Could not assign unique IP for agent miner-001. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.10 to agent miner-001
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for miner-002: Could not assign unique IP for agent miner-002. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.11 to agent miner-002
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for miner-003: Could not assign unique IP for agent miner-003. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.12 to agent miner-003
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-001: Could not assign unique IP for agent relay-001. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.13 to agent relay-001
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-002: Could not assign unique IP for agent relay-002. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.14 to agent relay-002
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-003: Could not assign unique IP for agent relay-003. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.15 to agent relay-003
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-004: Could not assign unique IP for agent relay-004. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.16 to agent relay-004
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-005: Could not assign unique IP for agent relay-005. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.17 to agent relay-005
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for user-001: Could not assign unique IP for agent user-001. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.18 to agent user-001
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for user-002: Could not assign unique IP for agent user-002. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.19 to agent user-002
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for user-003: Could not assign unique IP for agent user-003. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.20 to agent user-003
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for user-004: Could not assign unique IP for agent user-004. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.21 to agent user-004
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for user-005: Could not assign unique IP for agent user-005. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.22 to agent user-005
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for miner-distributor: Could not assign unique IP for agent miner-distributor. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.20.125 to agent miner-distributor
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for simulation-monitor: Could not assign unique IP for agent simulation-monitor. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.30.30 to agent simulation-monitor
[2026-02-08T21:10:29Z INFO  monerosim::orchestrator] Agent registry has 15 agents
[2026-02-08T21:10:29Z INFO  monerosim::orchestrator] Agent registry JSON preview (first 500 chars): {
      "agents": [
        {
          "id": "miner-001",
          "ip_addr": "192.168.10.10",
          "daemon": true,
          "wallet": true,
          "user_script": "agents.autonomous_miner",
          "attributes": {
            "can_receive_distributions": "true",
            "hashrate": "40",
            "is_miner": "true"
          },
          "wallet_rpc_port": 18082,
          "daemon_rpc_port": 18081
        },
        {
          "id": "miner-002",
          "ip_addr": "192.168.10.11",
          "daemon": true,
          "wallet": true,
          "user_script"
[2026-02-08T21:10:29Z INFO  monerosim::orchestrator] Wrote agent registry to "/tmp/monerosim_shared/agent_registry.json", size: 4357 bytes
[2026-02-08T21:10:29Z INFO  monerosim::orchestrator] Wrote public node registry to "/tmp/monerosim_shared/public_nodes.json" with 0 nodes
[2026-02-08T21:10:29Z INFO  monerosim::utils::validation] IP Diversity Analysis:
[2026-02-08T21:10:29Z INFO  monerosim::utils::validation]   Total agents: 16
[2026-02-08T21:10:29Z INFO  monerosim::utils::validation]   Unique /24 subnets: 4 (25.0% of agents)
[2026-02-08T21:10:29Z INFO  monerosim::utils::validation]   Unique first octets: 1
[2026-02-08T21:10:29Z WARN  monerosim::utils::validation] LOW IP DIVERSITY: Only 25.0% of agents have unique /24 subnets. Monero's P2P layer deduplicates by /24 subnet, which may cause connection issues or unrealistic network behavior.
[2026-02-08T21:10:29Z INFO  monerosim] Generated Agent-based Shadow configuration: "/home/lever65/monerosim_dev/monerosim/20260208_tests/01_basic_relay_shadow/shadow_agents.yaml"
[2026-02-08T21:10:29Z INFO  monerosim] Ready to run Shadow simulation with: shadow "/home/lever65/monerosim_dev/monerosim/20260208_tests/01_basic_relay_shadow/shadow_agents.yaml"
[2026-02-08T21:10:29Z INFO  monerosim] Configuration parsing completed successfully
OK
[01_basic_relay] Process counts:
  dnsserver: 1 process(es)
  miner-001: 4 process(es)
  miner-002: 4 process(es)
  miner-003: 4 process(es)
  miner-distributor: 1 process(es)
  relay-001: 1 process(es)
  relay-002: 1 process(es)
  relay-003: 1 process(es)
  relay-004: 1 process(es)
  relay-005: 1 process(es)
  simulation-monitor: 1 process(es)
  user-001: 3 process(es)
  user-002: 3 process(es)
  user-003: 3 process(es)
  user-004: 3 process(es)
  user-005: 3 process(es)
OK
[01_basic_relay] Agent registry relay entries:
  relay-001: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-002: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-003: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-004: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-005: wallet=False, script=None, wallet_rpc_port=None [OK]
[01_basic_relay] Validator:
Traceback (most recent call last):
  File "<string>", line 2, in <module>
    from scripts.ai_config.validator import ConfigValidator
  File "/home/lever65/monerosim_dev/monerosim/scripts/ai_config/__init__.py", line 15, in <module>
    from .generator import ConfigGenerator
  File "/home/lever65/monerosim_dev/monerosim/scripts/ai_config/generator.py", line 23, in <module>
    from ..scenario_parser import parse_scenario, expand_scenario
  File "/home/lever65/monerosim_dev/monerosim/scripts/scenario_parser.py", line 60, in <module>
    from generate_config import parse_duration, calculate_activity_start_times
ModuleNotFoundError: No module named 'generate_config'

--- 02_relay_only ---
Expanding scenario: /home/lever65/monerosim_dev/monerosim/20260208_tests/02_relay_only.scenario.yaml
Expanded /home/lever65/monerosim_dev/monerosim/20260208_tests/02_relay_only.scenario.yaml -> /home/lever65/monerosim_dev/monerosim/20260208_tests/02_relay_only.expanded.yaml
  Agents: 10
  Bootstrap ends: 4h
  Activity starts: 5h
OK
[2026-02-08T21:10:29Z INFO  monerosim] Starting MoneroSim configuration parser v2
[2026-02-08T21:10:29Z INFO  monerosim] Configuration file: "/home/lever65/monerosim_dev/monerosim/20260208_tests/02_relay_only.expanded.yaml"
[2026-02-08T21:10:29Z INFO  monerosim] Output directory: "/home/lever65/monerosim_dev/monerosim/20260208_tests/02_relay_only_shadow"
[2026-02-08T21:10:29Z INFO  monerosim::config_loader] This appears to be an agent configuration without nodes section. The new parser will handle this correctly.
[2026-02-08T21:10:29Z INFO  monerosim::config_loader] Loading configuration from: "/home/lever65/monerosim_dev/monerosim/20260208_tests/02_relay_only.expanded.yaml"
[2026-02-08T21:10:29Z INFO  monerosim::config_loader] Detected agent-based configuration
[2026-02-08T21:10:29Z INFO  monerosim::config_loader] Configuration validated successfully
[2026-02-08T21:10:29Z INFO  monerosim] Cleaning up previous simulation state
[2026-02-08T21:10:29Z INFO  monerosim] Running in agent-based simulation mode
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned dynamic IP 192.168.0.10 to agent dnsserver using global registry
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned dynamic IP 192.168.0.110 to agent miner-001 using global registry
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for miner-002: Could not assign unique IP for agent miner-002. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.11 to agent miner-002
[2026-02-08T21:10:29Z INFO  monerosim::orchestrator] Created DNS server at 192.168.0.10
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for miner-001: Could not assign unique IP for agent miner-001. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.10 to agent miner-001
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for miner-002: Could not assign unique IP for agent miner-002. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.11 to agent miner-002
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-001: Could not assign unique IP for agent relay-001. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.12 to agent relay-001
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-002: Could not assign unique IP for agent relay-002. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.13 to agent relay-002
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-003: Could not assign unique IP for agent relay-003. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.14 to agent relay-003
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-004: Could not assign unique IP for agent relay-004. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.15 to agent relay-004
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-005: Could not assign unique IP for agent relay-005. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.16 to agent relay-005
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-006: Could not assign unique IP for agent relay-006. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.17 to agent relay-006
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-007: Could not assign unique IP for agent relay-007. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.18 to agent relay-007
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-008: Could not assign unique IP for agent relay-008. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.19 to agent relay-008
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for miner-distributor: Could not assign unique IP for agent miner-distributor. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.20.122 to agent miner-distributor
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for simulation-monitor: Could not assign unique IP for agent simulation-monitor. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.30.27 to agent simulation-monitor
[2026-02-08T21:10:29Z INFO  monerosim::orchestrator] Agent registry has 12 agents
[2026-02-08T21:10:29Z INFO  monerosim::orchestrator] Agent registry JSON preview (first 500 chars): {
      "agents": [
        {
          "id": "miner-001",
          "ip_addr": "192.168.10.10",
          "daemon": true,
          "wallet": true,
          "user_script": "agents.autonomous_miner",
          "attributes": {
            "can_receive_distributions": "true",
            "hashrate": "60",
            "is_miner": "true"
          },
          "wallet_rpc_port": 18082,
          "daemon_rpc_port": 18081
        },
        {
          "id": "miner-002",
          "ip_addr": "192.168.10.11",
          "daemon": true,
          "wallet": true,
          "user_script"
[2026-02-08T21:10:29Z INFO  monerosim::orchestrator] Wrote agent registry to "/tmp/monerosim_shared/agent_registry.json", size: 3073 bytes
[2026-02-08T21:10:29Z INFO  monerosim::orchestrator] Wrote public node registry to "/tmp/monerosim_shared/public_nodes.json" with 0 nodes
[2026-02-08T21:10:29Z INFO  monerosim::utils::validation] IP Diversity Analysis:
[2026-02-08T21:10:29Z INFO  monerosim::utils::validation]   Total agents: 13
[2026-02-08T21:10:29Z INFO  monerosim::utils::validation]   Unique /24 subnets: 4 (30.8% of agents)
[2026-02-08T21:10:29Z INFO  monerosim::utils::validation]   Unique first octets: 1
[2026-02-08T21:10:29Z WARN  monerosim::utils::validation] LOW IP DIVERSITY: Only 30.8% of agents have unique /24 subnets. Monero's P2P layer deduplicates by /24 subnet, which may cause connection issues or unrealistic network behavior.
[2026-02-08T21:10:29Z INFO  monerosim] Generated Agent-based Shadow configuration: "/home/lever65/monerosim_dev/monerosim/20260208_tests/02_relay_only_shadow/shadow_agents.yaml"
[2026-02-08T21:10:29Z INFO  monerosim] Ready to run Shadow simulation with: shadow "/home/lever65/monerosim_dev/monerosim/20260208_tests/02_relay_only_shadow/shadow_agents.yaml"
[2026-02-08T21:10:29Z INFO  monerosim] Configuration parsing completed successfully
OK
[02_relay_only] Process counts:
  dnsserver: 1 process(es)
  miner-001: 4 process(es)
  miner-002: 4 process(es)
  miner-distributor: 1 process(es)
  relay-001: 1 process(es)
  relay-002: 1 process(es)
  relay-003: 1 process(es)
  relay-004: 1 process(es)
  relay-005: 1 process(es)
  relay-006: 1 process(es)
  relay-007: 1 process(es)
  relay-008: 1 process(es)
  simulation-monitor: 1 process(es)
OK
[02_relay_only] Agent registry relay entries:
  relay-001: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-002: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-003: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-004: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-005: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-006: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-007: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-008: wallet=False, script=None, wallet_rpc_port=None [OK]
[02_relay_only] Validator:
Traceback (most recent call last):
  File "<string>", line 2, in <module>
    from scripts.ai_config.validator import ConfigValidator
  File "/home/lever65/monerosim_dev/monerosim/scripts/ai_config/__init__.py", line 15, in <module>
    from .generator import ConfigGenerator
  File "/home/lever65/monerosim_dev/monerosim/scripts/ai_config/generator.py", line 23, in <module>
    from ..scenario_parser import parse_scenario, expand_scenario
  File "/home/lever65/monerosim_dev/monerosim/scripts/scenario_parser.py", line 60, in <module>
    from generate_config import parse_duration, calculate_activity_start_times
ModuleNotFoundError: No module named 'generate_config'

--- 03_relay_upgrade ---
Expanding scenario: /home/lever65/monerosim_dev/monerosim/20260208_tests/03_relay_upgrade.scenario.yaml
Expanded /home/lever65/monerosim_dev/monerosim/20260208_tests/03_relay_upgrade.scenario.yaml -> /home/lever65/monerosim_dev/monerosim/20260208_tests/03_relay_upgrade.expanded.yaml
  Agents: 10
  Bootstrap ends: 4h
  Activity starts: 5h
OK
[2026-02-08T21:10:29Z INFO  monerosim] Starting MoneroSim configuration parser v2
[2026-02-08T21:10:29Z INFO  monerosim] Configuration file: "/home/lever65/monerosim_dev/monerosim/20260208_tests/03_relay_upgrade.expanded.yaml"
[2026-02-08T21:10:29Z INFO  monerosim] Output directory: "/home/lever65/monerosim_dev/monerosim/20260208_tests/03_relay_upgrade_shadow"
[2026-02-08T21:10:29Z INFO  monerosim::config_loader] This appears to be an agent configuration without nodes section. The new parser will handle this correctly.
[2026-02-08T21:10:29Z INFO  monerosim::config_loader] Loading configuration from: "/home/lever65/monerosim_dev/monerosim/20260208_tests/03_relay_upgrade.expanded.yaml"
[2026-02-08T21:10:29Z INFO  monerosim::config_loader] Detected agent-based configuration
[2026-02-08T21:10:29Z INFO  monerosim::config_loader] Configuration validated successfully
[2026-02-08T21:10:29Z INFO  monerosim] Cleaning up previous simulation state
[2026-02-08T21:10:29Z INFO  monerosim] Running in agent-based simulation mode
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned dynamic IP 192.168.0.10 to agent dnsserver using global registry
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned dynamic IP 192.168.0.110 to agent miner-001 using global registry
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for miner-002: Could not assign unique IP for agent miner-002. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.11 to agent miner-002
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for miner-003: Could not assign unique IP for agent miner-003. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.12 to agent miner-003
[2026-02-08T21:10:29Z INFO  monerosim::orchestrator] Created DNS server at 192.168.0.10
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for miner-001: Could not assign unique IP for agent miner-001. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.10 to agent miner-001
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for miner-002: Could not assign unique IP for agent miner-002. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.11 to agent miner-002
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for miner-003: Could not assign unique IP for agent miner-003. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.12 to agent miner-003
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-001: Could not assign unique IP for agent relay-001. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.13 to agent relay-001
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-002: Could not assign unique IP for agent relay-002. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.14 to agent relay-002
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-003: Could not assign unique IP for agent relay-003. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.15 to agent relay-003
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-004: Could not assign unique IP for agent relay-004. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.16 to agent relay-004
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for user-001: Could not assign unique IP for agent user-001. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.17 to agent user-001
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for user-002: Could not assign unique IP for agent user-002. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.18 to agent user-002
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for user-003: Could not assign unique IP for agent user-003. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.19 to agent user-003
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for miner-distributor: Could not assign unique IP for agent miner-distributor. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.20.122 to agent miner-distributor
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for simulation-monitor: Could not assign unique IP for agent simulation-monitor. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.30.27 to agent simulation-monitor
[2026-02-08T21:10:29Z INFO  monerosim::orchestrator] Agent registry has 12 agents
[2026-02-08T21:10:29Z INFO  monerosim::orchestrator] Agent registry JSON preview (first 500 chars): {
      "agents": [
        {
          "id": "miner-001",
          "ip_addr": "192.168.10.10",
          "daemon": true,
          "wallet": true,
          "user_script": "agents.autonomous_miner",
          "attributes": {
            "can_receive_distributions": "true",
            "hashrate": "40",
            "is_miner": "true"
          },
          "wallet_rpc_port": 18082,
          "daemon_rpc_port": 18081
        },
        {
          "id": "miner-002",
          "ip_addr": "192.168.10.11",
          "daemon": true,
          "wallet": true,
          "user_script"
[2026-02-08T21:10:29Z INFO  monerosim::orchestrator] Wrote agent registry to "/tmp/monerosim_shared/agent_registry.json", size: 3471 bytes
[2026-02-08T21:10:29Z INFO  monerosim::orchestrator] Wrote public node registry to "/tmp/monerosim_shared/public_nodes.json" with 0 nodes
[2026-02-08T21:10:29Z INFO  monerosim::utils::validation] IP Diversity Analysis:
[2026-02-08T21:10:29Z INFO  monerosim::utils::validation]   Total agents: 13
[2026-02-08T21:10:29Z INFO  monerosim::utils::validation]   Unique /24 subnets: 4 (30.8% of agents)
[2026-02-08T21:10:29Z INFO  monerosim::utils::validation]   Unique first octets: 1
[2026-02-08T21:10:29Z WARN  monerosim::utils::validation] LOW IP DIVERSITY: Only 30.8% of agents have unique /24 subnets. Monero's P2P layer deduplicates by /24 subnet, which may cause connection issues or unrealistic network behavior.
[2026-02-08T21:10:29Z INFO  monerosim] Generated Agent-based Shadow configuration: "/home/lever65/monerosim_dev/monerosim/20260208_tests/03_relay_upgrade_shadow/shadow_agents.yaml"
[2026-02-08T21:10:29Z INFO  monerosim] Ready to run Shadow simulation with: shadow "/home/lever65/monerosim_dev/monerosim/20260208_tests/03_relay_upgrade_shadow/shadow_agents.yaml"
[2026-02-08T21:10:29Z INFO  monerosim] Configuration parsing completed successfully
OK
[03_relay_upgrade] Process counts:
  dnsserver: 1 process(es)
  miner-001: 5 process(es)
  miner-002: 5 process(es)
  miner-003: 5 process(es)
  miner-distributor: 1 process(es)
  relay-001: 2 process(es)
  relay-002: 2 process(es)
  relay-003: 2 process(es)
  relay-004: 2 process(es)
  simulation-monitor: 1 process(es)
  user-001: 4 process(es)
  user-002: 4 process(es)
  user-003: 4 process(es)
FAIL: relay-001 has 2 processes, expected 1
FAIL: relay-002 has 2 processes, expected 1
FAIL: relay-003 has 2 processes, expected 1
FAIL: relay-004 has 2 processes, expected 1
[03_relay_upgrade] Agent registry relay entries:
  relay-001: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-002: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-003: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-004: wallet=False, script=None, wallet_rpc_port=None [OK]
[03_relay_upgrade] Validator:
Traceback (most recent call last):
  File "<string>", line 2, in <module>
    from scripts.ai_config.validator import ConfigValidator
  File "/home/lever65/monerosim_dev/monerosim/scripts/ai_config/__init__.py", line 15, in <module>
    from .generator import ConfigGenerator
  File "/home/lever65/monerosim_dev/monerosim/scripts/ai_config/generator.py", line 23, in <module>
    from ..scenario_parser import parse_scenario, expand_scenario
  File "/home/lever65/monerosim_dev/monerosim/scripts/scenario_parser.py", line 60, in <module>
    from generate_config import parse_duration, calculate_activity_start_times
ModuleNotFoundError: No module named 'generate_config'

--- 04_large_relay_group ---
Expanding scenario: /home/lever65/monerosim_dev/monerosim/20260208_tests/04_large_relay_group.scenario.yaml
Expanded /home/lever65/monerosim_dev/monerosim/20260208_tests/04_large_relay_group.scenario.yaml -> /home/lever65/monerosim_dev/monerosim/20260208_tests/04_large_relay_group.expanded.yaml
  Agents: 68
  Bootstrap ends: 4h
  Activity starts: 5h
OK
[2026-02-08T21:10:29Z INFO  monerosim] Starting MoneroSim configuration parser v2
[2026-02-08T21:10:29Z INFO  monerosim] Configuration file: "/home/lever65/monerosim_dev/monerosim/20260208_tests/04_large_relay_group.expanded.yaml"
[2026-02-08T21:10:29Z INFO  monerosim] Output directory: "/home/lever65/monerosim_dev/monerosim/20260208_tests/04_large_relay_group_shadow"
[2026-02-08T21:10:29Z INFO  monerosim::config_loader] This appears to be an agent configuration without nodes section. The new parser will handle this correctly.
[2026-02-08T21:10:29Z INFO  monerosim::config_loader] Loading configuration from: "/home/lever65/monerosim_dev/monerosim/20260208_tests/04_large_relay_group.expanded.yaml"
[2026-02-08T21:10:29Z INFO  monerosim::config_loader] Detected agent-based configuration
[2026-02-08T21:10:29Z INFO  monerosim::config_loader] Configuration validated successfully
[2026-02-08T21:10:29Z INFO  monerosim] Cleaning up previous simulation state
[2026-02-08T21:10:29Z INFO  monerosim] Running in agent-based simulation mode
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned dynamic IP 192.168.0.10 to agent dnsserver using global registry
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned dynamic IP 192.168.0.110 to agent miner-001 using global registry
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for miner-002: Could not assign unique IP for agent miner-002. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.11 to agent miner-002
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for miner-003: Could not assign unique IP for agent miner-003. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.12 to agent miner-003
[2026-02-08T21:10:29Z INFO  monerosim::orchestrator] Created DNS server at 192.168.0.10
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for miner-001: Could not assign unique IP for agent miner-001. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.10 to agent miner-001
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for miner-002: Could not assign unique IP for agent miner-002. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.11 to agent miner-002
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for miner-003: Could not assign unique IP for agent miner-003. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.12 to agent miner-003
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-001: Could not assign unique IP for agent relay-001. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.13 to agent relay-001
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-002: Could not assign unique IP for agent relay-002. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.14 to agent relay-002
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-003: Could not assign unique IP for agent relay-003. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.15 to agent relay-003
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-004: Could not assign unique IP for agent relay-004. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.16 to agent relay-004
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-005: Could not assign unique IP for agent relay-005. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.17 to agent relay-005
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-006: Could not assign unique IP for agent relay-006. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.18 to agent relay-006
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-007: Could not assign unique IP for agent relay-007. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.19 to agent relay-007
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-008: Could not assign unique IP for agent relay-008. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.20 to agent relay-008
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-009: Could not assign unique IP for agent relay-009. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.21 to agent relay-009
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-010: Could not assign unique IP for agent relay-010. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.22 to agent relay-010
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-011: Could not assign unique IP for agent relay-011. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.23 to agent relay-011
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-012: Could not assign unique IP for agent relay-012. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.24 to agent relay-012
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-013: Could not assign unique IP for agent relay-013. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.25 to agent relay-013
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-014: Could not assign unique IP for agent relay-014. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.26 to agent relay-014
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-015: Could not assign unique IP for agent relay-015. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.27 to agent relay-015
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-016: Could not assign unique IP for agent relay-016. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.28 to agent relay-016
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-017: Could not assign unique IP for agent relay-017. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.29 to agent relay-017
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-018: Could not assign unique IP for agent relay-018. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.30 to agent relay-018
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-019: Could not assign unique IP for agent relay-019. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.31 to agent relay-019
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-020: Could not assign unique IP for agent relay-020. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.32 to agent relay-020
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-021: Could not assign unique IP for agent relay-021. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.33 to agent relay-021
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-022: Could not assign unique IP for agent relay-022. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.34 to agent relay-022
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-023: Could not assign unique IP for agent relay-023. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.35 to agent relay-023
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-024: Could not assign unique IP for agent relay-024. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.36 to agent relay-024
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-025: Could not assign unique IP for agent relay-025. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.37 to agent relay-025
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-026: Could not assign unique IP for agent relay-026. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.38 to agent relay-026
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-027: Could not assign unique IP for agent relay-027. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.39 to agent relay-027
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-028: Could not assign unique IP for agent relay-028. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.40 to agent relay-028
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-029: Could not assign unique IP for agent relay-029. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.41 to agent relay-029
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-030: Could not assign unique IP for agent relay-030. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.42 to agent relay-030
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-031: Could not assign unique IP for agent relay-031. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.43 to agent relay-031
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-032: Could not assign unique IP for agent relay-032. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.44 to agent relay-032
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-033: Could not assign unique IP for agent relay-033. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.45 to agent relay-033
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-034: Could not assign unique IP for agent relay-034. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.46 to agent relay-034
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-035: Could not assign unique IP for agent relay-035. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.47 to agent relay-035
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-036: Could not assign unique IP for agent relay-036. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.48 to agent relay-036
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-037: Could not assign unique IP for agent relay-037. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.49 to agent relay-037
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-038: Could not assign unique IP for agent relay-038. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.50 to agent relay-038
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-039: Could not assign unique IP for agent relay-039. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.51 to agent relay-039
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-040: Could not assign unique IP for agent relay-040. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.52 to agent relay-040
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-041: Could not assign unique IP for agent relay-041. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.53 to agent relay-041
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-042: Could not assign unique IP for agent relay-042. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.54 to agent relay-042
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-043: Could not assign unique IP for agent relay-043. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.55 to agent relay-043
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-044: Could not assign unique IP for agent relay-044. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.56 to agent relay-044
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-045: Could not assign unique IP for agent relay-045. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.57 to agent relay-045
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-046: Could not assign unique IP for agent relay-046. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.58 to agent relay-046
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-047: Could not assign unique IP for agent relay-047. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.59 to agent relay-047
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-048: Could not assign unique IP for agent relay-048. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.60 to agent relay-048
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-049: Could not assign unique IP for agent relay-049. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.61 to agent relay-049
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-050: Could not assign unique IP for agent relay-050. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.62 to agent relay-050
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-051: Could not assign unique IP for agent relay-051. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.63 to agent relay-051
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-052: Could not assign unique IP for agent relay-052. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.64 to agent relay-052
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-053: Could not assign unique IP for agent relay-053. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.65 to agent relay-053
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-054: Could not assign unique IP for agent relay-054. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.66 to agent relay-054
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-055: Could not assign unique IP for agent relay-055. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.67 to agent relay-055
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-056: Could not assign unique IP for agent relay-056. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.68 to agent relay-056
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-057: Could not assign unique IP for agent relay-057. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.69 to agent relay-057
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-058: Could not assign unique IP for agent relay-058. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.70 to agent relay-058
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-059: Could not assign unique IP for agent relay-059. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.71 to agent relay-059
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-060: Could not assign unique IP for agent relay-060. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.72 to agent relay-060
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for user-001: Could not assign unique IP for agent user-001. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.73 to agent user-001
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for user-002: Could not assign unique IP for agent user-002. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.74 to agent user-002
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for user-003: Could not assign unique IP for agent user-003. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.75 to agent user-003
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for user-004: Could not assign unique IP for agent user-004. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.76 to agent user-004
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for user-005: Could not assign unique IP for agent user-005. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.77 to agent user-005
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for miner-distributor: Could not assign unique IP for agent miner-distributor. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.20.180 to agent miner-distributor
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for simulation-monitor: Could not assign unique IP for agent simulation-monitor. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.30.85 to agent simulation-monitor
[2026-02-08T21:10:29Z INFO  monerosim::orchestrator] Agent registry has 70 agents
[2026-02-08T21:10:29Z INFO  monerosim::orchestrator] Agent registry JSON preview (first 500 chars): {
      "agents": [
        {
          "id": "miner-001",
          "ip_addr": "192.168.10.10",
          "daemon": true,
          "wallet": true,
          "user_script": "agents.autonomous_miner",
          "attributes": {
            "can_receive_distributions": "true",
            "hashrate": "40",
            "is_miner": "true"
          },
          "wallet_rpc_port": 18082,
          "daemon_rpc_port": 18081
        },
        {
          "id": "miner-002",
          "ip_addr": "192.168.10.11",
          "daemon": true,
          "wallet": true,
          "user_script"
[2026-02-08T21:10:29Z INFO  monerosim::orchestrator] Wrote agent registry to "/tmp/monerosim_shared/agent_registry.json", size: 17227 bytes
[2026-02-08T21:10:29Z INFO  monerosim::orchestrator] Wrote public node registry to "/tmp/monerosim_shared/public_nodes.json" with 0 nodes
[2026-02-08T21:10:29Z INFO  monerosim::utils::validation] IP Diversity Analysis:
[2026-02-08T21:10:29Z INFO  monerosim::utils::validation]   Total agents: 71
[2026-02-08T21:10:29Z INFO  monerosim::utils::validation]   Unique /24 subnets: 4 (5.6% of agents)
[2026-02-08T21:10:29Z INFO  monerosim::utils::validation]   Unique first octets: 1
[2026-02-08T21:10:29Z WARN  monerosim::utils::validation] LOW IP DIVERSITY: Only 5.6% of agents have unique /24 subnets. Monero's P2P layer deduplicates by /24 subnet, which may cause connection issues or unrealistic network behavior.
[2026-02-08T21:10:29Z WARN  monerosim::utils::validation] LIMITED IP RANGE: Only 1 unique first octets for 71 agents. Real Internet traffic comes from diverse IP ranges.
[2026-02-08T21:10:29Z ERROR monerosim::utils::validation] CRITICAL: Only 4 unique /24 subnets for 71 agents (5.6%). This will severely impact Monero P2P connectivity simulation. Consider increasing topology node count or reducing agent count.
[2026-02-08T21:10:29Z INFO  monerosim] Generated Agent-based Shadow configuration: "/home/lever65/monerosim_dev/monerosim/20260208_tests/04_large_relay_group_shadow/shadow_agents.yaml"
[2026-02-08T21:10:29Z INFO  monerosim] Ready to run Shadow simulation with: shadow "/home/lever65/monerosim_dev/monerosim/20260208_tests/04_large_relay_group_shadow/shadow_agents.yaml"
[2026-02-08T21:10:29Z INFO  monerosim] Configuration parsing completed successfully
OK
[04_large_relay_group] Process counts:
  dnsserver: 1 process(es)
  miner-001: 4 process(es)
  miner-002: 4 process(es)
  miner-003: 4 process(es)
  miner-distributor: 1 process(es)
  relay-001: 1 process(es)
  relay-002: 1 process(es)
  relay-003: 1 process(es)
  relay-004: 1 process(es)
  relay-005: 1 process(es)
  relay-006: 1 process(es)
  relay-007: 1 process(es)
  relay-008: 1 process(es)
  relay-009: 1 process(es)
  relay-010: 1 process(es)
  relay-011: 1 process(es)
  relay-012: 1 process(es)
  relay-013: 1 process(es)
  relay-014: 1 process(es)
  relay-015: 1 process(es)
  relay-016: 1 process(es)
  relay-017: 1 process(es)
  relay-018: 1 process(es)
  relay-019: 1 process(es)
  relay-020: 1 process(es)
  relay-021: 1 process(es)
  relay-022: 1 process(es)
  relay-023: 1 process(es)
  relay-024: 1 process(es)
  relay-025: 1 process(es)
  relay-026: 1 process(es)
  relay-027: 1 process(es)
  relay-028: 1 process(es)
  relay-029: 1 process(es)
  relay-030: 1 process(es)
  relay-031: 1 process(es)
  relay-032: 1 process(es)
  relay-033: 1 process(es)
  relay-034: 1 process(es)
  relay-035: 1 process(es)
  relay-036: 1 process(es)
  relay-037: 1 process(es)
  relay-038: 1 process(es)
  relay-039: 1 process(es)
  relay-040: 1 process(es)
  relay-041: 1 process(es)
  relay-042: 1 process(es)
  relay-043: 1 process(es)
  relay-044: 1 process(es)
  relay-045: 1 process(es)
  relay-046: 1 process(es)
  relay-047: 1 process(es)
  relay-048: 1 process(es)
  relay-049: 1 process(es)
  relay-050: 1 process(es)
  relay-051: 1 process(es)
  relay-052: 1 process(es)
  relay-053: 1 process(es)
  relay-054: 1 process(es)
  relay-055: 1 process(es)
  relay-056: 1 process(es)
  relay-057: 1 process(es)
  relay-058: 1 process(es)
  relay-059: 1 process(es)
  relay-060: 1 process(es)
  simulation-monitor: 1 process(es)
  user-001: 3 process(es)
  user-002: 3 process(es)
  user-003: 3 process(es)
  user-004: 3 process(es)
  user-005: 3 process(es)
OK
[04_large_relay_group] Agent registry relay entries:
  relay-001: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-002: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-003: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-004: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-005: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-006: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-007: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-008: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-009: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-010: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-011: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-012: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-013: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-014: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-015: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-016: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-017: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-018: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-019: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-020: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-021: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-022: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-023: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-024: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-025: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-026: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-027: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-028: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-029: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-030: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-031: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-032: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-033: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-034: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-035: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-036: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-037: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-038: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-039: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-040: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-041: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-042: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-043: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-044: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-045: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-046: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-047: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-048: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-049: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-050: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-051: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-052: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-053: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-054: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-055: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-056: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-057: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-058: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-059: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-060: wallet=False, script=None, wallet_rpc_port=None [OK]
[04_large_relay_group] Validator:
Traceback (most recent call last):
  File "<string>", line 2, in <module>
    from scripts.ai_config.validator import ConfigValidator
  File "/home/lever65/monerosim_dev/monerosim/scripts/ai_config/__init__.py", line 15, in <module>
    from .generator import ConfigGenerator
  File "/home/lever65/monerosim_dev/monerosim/scripts/ai_config/generator.py", line 23, in <module>
    from ..scenario_parser import parse_scenario, expand_scenario
  File "/home/lever65/monerosim_dev/monerosim/scripts/scenario_parser.py", line 60, in <module>
    from generate_config import parse_duration, calculate_activity_start_times
ModuleNotFoundError: No module named 'generate_config'

--- 05_mixed_agents ---
Expanding scenario: /home/lever65/monerosim_dev/monerosim/20260208_tests/05_mixed_agents.scenario.yaml
Expanded /home/lever65/monerosim_dev/monerosim/20260208_tests/05_mixed_agents.scenario.yaml -> /home/lever65/monerosim_dev/monerosim/20260208_tests/05_mixed_agents.expanded.yaml
  Agents: 15
  Bootstrap ends: 4h
  Activity starts: 5h
OK
[2026-02-08T21:10:29Z INFO  monerosim] Starting MoneroSim configuration parser v2
[2026-02-08T21:10:29Z INFO  monerosim] Configuration file: "/home/lever65/monerosim_dev/monerosim/20260208_tests/05_mixed_agents.expanded.yaml"
[2026-02-08T21:10:29Z INFO  monerosim] Output directory: "/home/lever65/monerosim_dev/monerosim/20260208_tests/05_mixed_agents_shadow"
[2026-02-08T21:10:29Z INFO  monerosim::config_loader] This appears to be an agent configuration without nodes section. The new parser will handle this correctly.
[2026-02-08T21:10:29Z INFO  monerosim::config_loader] Loading configuration from: "/home/lever65/monerosim_dev/monerosim/20260208_tests/05_mixed_agents.expanded.yaml"
[2026-02-08T21:10:29Z INFO  monerosim::config_loader] Detected agent-based configuration
[2026-02-08T21:10:29Z INFO  monerosim::config_loader] Configuration validated successfully
[2026-02-08T21:10:29Z INFO  monerosim] Cleaning up previous simulation state
[2026-02-08T21:10:29Z INFO  monerosim] Running in agent-based simulation mode
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned dynamic IP 192.168.0.10 to agent dnsserver using global registry
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned dynamic IP 192.168.0.110 to agent miner-001 using global registry
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for miner-002: Could not assign unique IP for agent miner-002. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.11 to agent miner-002
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for miner-003: Could not assign unique IP for agent miner-003. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.12 to agent miner-003
[2026-02-08T21:10:29Z INFO  monerosim::orchestrator] Created DNS server at 192.168.0.10
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for miner-001: Could not assign unique IP for agent miner-001. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.10 to agent miner-001
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for miner-002: Could not assign unique IP for agent miner-002. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.11 to agent miner-002
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for miner-003: Could not assign unique IP for agent miner-003. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.12 to agent miner-003
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-001: Could not assign unique IP for agent relay-001. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.13 to agent relay-001
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-002: Could not assign unique IP for agent relay-002. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.14 to agent relay-002
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-003: Could not assign unique IP for agent relay-003. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.15 to agent relay-003
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-004: Could not assign unique IP for agent relay-004. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.16 to agent relay-004
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-005: Could not assign unique IP for agent relay-005. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.17 to agent relay-005
[2026-02-08T21:10:29Z INFO  monerosim::ip::registry] Created new subnet group 'spy_cluster' with prefix 10.100.0.0/24
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned subnet group IP 10.100.0.10 to agent spy-001 (group: spy_cluster)
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned subnet group IP 10.100.0.11 to agent spy-002 (group: spy_cluster)
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for user-001: Could not assign unique IP for agent user-001. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.20 to agent user-001
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for user-002: Could not assign unique IP for agent user-002. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.21 to agent user-002
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for user-003: Could not assign unique IP for agent user-003. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.22 to agent user-003
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for user-004: Could not assign unique IP for agent user-004. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.23 to agent user-004
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for user-005: Could not assign unique IP for agent user-005. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.24 to agent user-005
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for miner-distributor: Could not assign unique IP for agent miner-distributor. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.20.127 to agent miner-distributor
[2026-02-08T21:10:29Z WARN  monerosim::ip::allocator] IP registry assignment failed for simulation-monitor: Could not assign unique IP for agent simulation-monitor. Using geographic fallback.
[2026-02-08T21:10:29Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.30.32 to agent simulation-monitor
[2026-02-08T21:10:29Z INFO  monerosim::orchestrator] Agent registry has 17 agents
[2026-02-08T21:10:29Z INFO  monerosim::orchestrator] Agent registry JSON preview (first 500 chars): {
      "agents": [
        {
          "id": "miner-001",
          "ip_addr": "192.168.10.10",
          "daemon": true,
          "wallet": true,
          "user_script": "agents.autonomous_miner",
          "attributes": {
            "can_receive_distributions": "true",
            "hashrate": "40",
            "is_miner": "true"
          },
          "wallet_rpc_port": 18082,
          "daemon_rpc_port": 18081
        },
        {
          "id": "miner-002",
          "ip_addr": "192.168.10.11",
          "daemon": true,
          "wallet": true,
          "user_script"
[2026-02-08T21:10:29Z INFO  monerosim::orchestrator] Wrote agent registry to "/tmp/monerosim_shared/agent_registry.json", size: 5003 bytes
[2026-02-08T21:10:29Z INFO  monerosim::orchestrator] Wrote public node registry to "/tmp/monerosim_shared/public_nodes.json" with 0 nodes
[2026-02-08T21:10:29Z INFO  monerosim::utils::validation] IP Diversity Analysis:
[2026-02-08T21:10:29Z INFO  monerosim::utils::validation]   Total agents: 18
[2026-02-08T21:10:29Z INFO  monerosim::utils::validation]   Unique /24 subnets: 5 (27.8% of agents)
[2026-02-08T21:10:29Z INFO  monerosim::utils::validation]   Unique first octets: 2
[2026-02-08T21:10:29Z WARN  monerosim::utils::validation] LOW IP DIVERSITY: Only 27.8% of agents have unique /24 subnets. Monero's P2P layer deduplicates by /24 subnet, which may cause connection issues or unrealistic network behavior.
[2026-02-08T21:10:29Z INFO  monerosim] Generated Agent-based Shadow configuration: "/home/lever65/monerosim_dev/monerosim/20260208_tests/05_mixed_agents_shadow/shadow_agents.yaml"
[2026-02-08T21:10:29Z INFO  monerosim] Ready to run Shadow simulation with: shadow "/home/lever65/monerosim_dev/monerosim/20260208_tests/05_mixed_agents_shadow/shadow_agents.yaml"
[2026-02-08T21:10:29Z INFO  monerosim] Configuration parsing completed successfully
OK
[05_mixed_agents] Process counts:
  dnsserver: 1 process(es)
  miner-001: 4 process(es)
  miner-002: 4 process(es)
  miner-003: 4 process(es)
  miner-distributor: 1 process(es)
  relay-001: 1 process(es)
  relay-002: 1 process(es)
  relay-003: 1 process(es)
  relay-004: 1 process(es)
  relay-005: 1 process(es)
  simulation-monitor: 1 process(es)
  spy-001: 3 process(es)
  spy-002: 3 process(es)
  user-001: 3 process(es)
  user-002: 3 process(es)
  user-003: 3 process(es)
  user-004: 3 process(es)
  user-005: 3 process(es)
OK
[05_mixed_agents] Agent registry relay entries:
  relay-001: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-002: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-003: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-004: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-005: wallet=False, script=None, wallet_rpc_port=None [OK]
[05_mixed_agents] Validator:
Traceback (most recent call last):
  File "<string>", line 2, in <module>
    from scripts.ai_config.validator import ConfigValidator
  File "/home/lever65/monerosim_dev/monerosim/scripts/ai_config/__init__.py", line 15, in <module>
    from .generator import ConfigGenerator
  File "/home/lever65/monerosim_dev/monerosim/scripts/ai_config/generator.py", line 23, in <module>
    from ..scenario_parser import parse_scenario, expand_scenario
  File "/home/lever65/monerosim_dev/monerosim/scripts/scenario_parser.py", line 60, in <module>
    from generate_config import parse_duration, calculate_activity_start_times
ModuleNotFoundError: No module named 'generate_config'

--- 06_relay_daemon_options ---
Expanding scenario: /home/lever65/monerosim_dev/monerosim/20260208_tests/06_relay_daemon_options.scenario.yaml
Expanded /home/lever65/monerosim_dev/monerosim/20260208_tests/06_relay_daemon_options.scenario.yaml -> /home/lever65/monerosim_dev/monerosim/20260208_tests/06_relay_daemon_options.expanded.yaml
  Agents: 8
  Bootstrap ends: 4h
  Activity starts: 5h
OK
[2026-02-08T21:10:30Z INFO  monerosim] Starting MoneroSim configuration parser v2
[2026-02-08T21:10:30Z INFO  monerosim] Configuration file: "/home/lever65/monerosim_dev/monerosim/20260208_tests/06_relay_daemon_options.expanded.yaml"
[2026-02-08T21:10:30Z INFO  monerosim] Output directory: "/home/lever65/monerosim_dev/monerosim/20260208_tests/06_relay_daemon_options_shadow"
[2026-02-08T21:10:30Z INFO  monerosim::config_loader] This appears to be an agent configuration without nodes section. The new parser will handle this correctly.
[2026-02-08T21:10:30Z INFO  monerosim::config_loader] Loading configuration from: "/home/lever65/monerosim_dev/monerosim/20260208_tests/06_relay_daemon_options.expanded.yaml"
[2026-02-08T21:10:30Z INFO  monerosim::config_loader] Detected agent-based configuration
[2026-02-08T21:10:30Z INFO  monerosim::config_loader] Configuration validated successfully
[2026-02-08T21:10:30Z INFO  monerosim] Cleaning up previous simulation state
[2026-02-08T21:10:30Z INFO  monerosim] Running in agent-based simulation mode
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned dynamic IP 192.168.0.10 to agent dnsserver using global registry
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned dynamic IP 192.168.0.110 to agent miner-001 using global registry
[2026-02-08T21:10:30Z WARN  monerosim::ip::allocator] IP registry assignment failed for miner-002: Could not assign unique IP for agent miner-002. Using geographic fallback.
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.11 to agent miner-002
[2026-02-08T21:10:30Z INFO  monerosim::orchestrator] Created DNS server at 192.168.0.10
[2026-02-08T21:10:30Z WARN  monerosim::ip::allocator] IP registry assignment failed for miner-001: Could not assign unique IP for agent miner-001. Using geographic fallback.
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.10 to agent miner-001
[2026-02-08T21:10:30Z WARN  monerosim::ip::allocator] IP registry assignment failed for miner-002: Could not assign unique IP for agent miner-002. Using geographic fallback.
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.11 to agent miner-002
[2026-02-08T21:10:30Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-hi-001: Could not assign unique IP for agent relay-hi-001. Using geographic fallback.
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.12 to agent relay-hi-001
[2026-02-08T21:10:30Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-hi-002: Could not assign unique IP for agent relay-hi-002. Using geographic fallback.
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.13 to agent relay-hi-002
[2026-02-08T21:10:30Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-hi-003: Could not assign unique IP for agent relay-hi-003. Using geographic fallback.
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.14 to agent relay-hi-003
[2026-02-08T21:10:30Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-lo-001: Could not assign unique IP for agent relay-lo-001. Using geographic fallback.
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.15 to agent relay-lo-001
[2026-02-08T21:10:30Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-lo-002: Could not assign unique IP for agent relay-lo-002. Using geographic fallback.
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.16 to agent relay-lo-002
[2026-02-08T21:10:30Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-lo-003: Could not assign unique IP for agent relay-lo-003. Using geographic fallback.
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.17 to agent relay-lo-003
[2026-02-08T21:10:30Z WARN  monerosim::ip::allocator] IP registry assignment failed for miner-distributor: Could not assign unique IP for agent miner-distributor. Using geographic fallback.
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.20.120 to agent miner-distributor
[2026-02-08T21:10:30Z WARN  monerosim::ip::allocator] IP registry assignment failed for simulation-monitor: Could not assign unique IP for agent simulation-monitor. Using geographic fallback.
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.30.25 to agent simulation-monitor
[2026-02-08T21:10:30Z INFO  monerosim::orchestrator] Agent registry has 10 agents
[2026-02-08T21:10:30Z INFO  monerosim::orchestrator] Agent registry JSON preview (first 500 chars): {
      "agents": [
        {
          "id": "miner-001",
          "ip_addr": "192.168.10.10",
          "daemon": true,
          "wallet": true,
          "user_script": "agents.autonomous_miner",
          "attributes": {
            "can_receive_distributions": "true",
            "hashrate": "60",
            "is_miner": "true"
          },
          "wallet_rpc_port": 18082,
          "daemon_rpc_port": 18081
        },
        {
          "id": "miner-002",
          "ip_addr": "192.168.10.11",
          "daemon": true,
          "wallet": true,
          "user_script"
[2026-02-08T21:10:30Z INFO  monerosim::orchestrator] Wrote agent registry to "/tmp/monerosim_shared/agent_registry.json", size: 2623 bytes
[2026-02-08T21:10:30Z INFO  monerosim::orchestrator] Wrote public node registry to "/tmp/monerosim_shared/public_nodes.json" with 0 nodes
[2026-02-08T21:10:30Z INFO  monerosim::utils::validation] IP Diversity Analysis:
[2026-02-08T21:10:30Z INFO  monerosim::utils::validation]   Total agents: 11
[2026-02-08T21:10:30Z INFO  monerosim::utils::validation]   Unique /24 subnets: 4 (36.4% of agents)
[2026-02-08T21:10:30Z INFO  monerosim::utils::validation]   Unique first octets: 1
[2026-02-08T21:10:30Z WARN  monerosim::utils::validation] LOW IP DIVERSITY: Only 36.4% of agents have unique /24 subnets. Monero's P2P layer deduplicates by /24 subnet, which may cause connection issues or unrealistic network behavior.
[2026-02-08T21:10:30Z INFO  monerosim] Generated Agent-based Shadow configuration: "/home/lever65/monerosim_dev/monerosim/20260208_tests/06_relay_daemon_options_shadow/shadow_agents.yaml"
[2026-02-08T21:10:30Z INFO  monerosim] Ready to run Shadow simulation with: shadow "/home/lever65/monerosim_dev/monerosim/20260208_tests/06_relay_daemon_options_shadow/shadow_agents.yaml"
[2026-02-08T21:10:30Z INFO  monerosim] Configuration parsing completed successfully
OK
[06_relay_daemon_options] Process counts:
  dnsserver: 1 process(es)
  miner-001: 4 process(es)
  miner-002: 4 process(es)
  miner-distributor: 1 process(es)
  relay-hi-001: 1 process(es)
  relay-hi-002: 1 process(es)
  relay-hi-003: 1 process(es)
  relay-lo-001: 1 process(es)
  relay-lo-002: 1 process(es)
  relay-lo-003: 1 process(es)
  simulation-monitor: 1 process(es)
OK
[06_relay_daemon_options] Agent registry relay entries:
  relay-hi-001: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-hi-002: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-hi-003: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-lo-001: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-lo-002: wallet=False, script=None, wallet_rpc_port=None [OK]
  relay-lo-003: wallet=False, script=None, wallet_rpc_port=None [OK]
[06_relay_daemon_options] Validator:
Traceback (most recent call last):
  File "<string>", line 2, in <module>
    from scripts.ai_config.validator import ConfigValidator
  File "/home/lever65/monerosim_dev/monerosim/scripts/ai_config/__init__.py", line 15, in <module>
    from .generator import ConfigGenerator
  File "/home/lever65/monerosim_dev/monerosim/scripts/ai_config/generator.py", line 23, in <module>
    from ..scenario_parser import parse_scenario, expand_scenario
  File "/home/lever65/monerosim_dev/monerosim/scripts/scenario_parser.py", line 60, in <module>
    from generate_config import parse_duration, calculate_activity_start_times
ModuleNotFoundError: No module named 'generate_config'

--- 08_singleton_relay ---
Expanding scenario: /home/lever65/monerosim_dev/monerosim/20260208_tests/08_singleton_relay.scenario.yaml
Expanded /home/lever65/monerosim_dev/monerosim/20260208_tests/08_singleton_relay.scenario.yaml -> /home/lever65/monerosim_dev/monerosim/20260208_tests/08_singleton_relay.expanded.yaml
  Agents: 2
  Bootstrap ends: 4h
  Activity starts: 5h
OK
[2026-02-08T21:10:30Z INFO  monerosim] Starting MoneroSim configuration parser v2
[2026-02-08T21:10:30Z INFO  monerosim] Configuration file: "/home/lever65/monerosim_dev/monerosim/20260208_tests/08_singleton_relay.expanded.yaml"
[2026-02-08T21:10:30Z INFO  monerosim] Output directory: "/home/lever65/monerosim_dev/monerosim/20260208_tests/08_singleton_relay_shadow"
[2026-02-08T21:10:30Z INFO  monerosim::config_loader] This appears to be an agent configuration without nodes section. The new parser will handle this correctly.
[2026-02-08T21:10:30Z INFO  monerosim::config_loader] Loading configuration from: "/home/lever65/monerosim_dev/monerosim/20260208_tests/08_singleton_relay.expanded.yaml"
[2026-02-08T21:10:30Z INFO  monerosim::config_loader] Detected agent-based configuration
[2026-02-08T21:10:30Z INFO  monerosim::config_loader] Configuration validated successfully
[2026-02-08T21:10:30Z INFO  monerosim] Cleaning up previous simulation state
[2026-02-08T21:10:30Z INFO  monerosim] Running in agent-based simulation mode
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned dynamic IP 192.168.0.10 to agent dnsserver using global registry
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned dynamic IP 192.168.0.110 to agent miner-001 using global registry
[2026-02-08T21:10:30Z INFO  monerosim::orchestrator] Created DNS server at 192.168.0.10
[2026-02-08T21:10:30Z WARN  monerosim::ip::allocator] IP registry assignment failed for miner-001: Could not assign unique IP for agent miner-001. Using geographic fallback.
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.10 to agent miner-001
[2026-02-08T21:10:30Z WARN  monerosim::ip::allocator] IP registry assignment failed for relay-gateway: Could not assign unique IP for agent relay-gateway. Using geographic fallback.
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.10.11 to agent relay-gateway
[2026-02-08T21:10:30Z WARN  monerosim::ip::allocator] IP registry assignment failed for miner-distributor: Could not assign unique IP for agent miner-distributor. Using geographic fallback.
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.20.114 to agent miner-distributor
[2026-02-08T21:10:30Z WARN  monerosim::ip::allocator] IP registry assignment failed for simulation-monitor: Could not assign unique IP for agent simulation-monitor. Using geographic fallback.
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned fallback IP 192.168.30.19 to agent simulation-monitor
[2026-02-08T21:10:30Z INFO  monerosim::orchestrator] Agent registry has 4 agents
[2026-02-08T21:10:30Z INFO  monerosim::orchestrator] Agent registry JSON preview (first 500 chars): {
      "agents": [
        {
          "id": "miner-001",
          "ip_addr": "192.168.10.10",
          "daemon": true,
          "wallet": true,
          "user_script": "agents.autonomous_miner",
          "attributes": {
            "hashrate": "100",
            "is_miner": "true"
          },
          "wallet_rpc_port": 18082,
          "daemon_rpc_port": 18081
        },
        {
          "id": "miner-distributor",
          "ip_addr": "192.168.20.114",
          "daemon": false,
          "wallet": false,
          "user_script": "agents.miner_distributor",
       
[2026-02-08T21:10:30Z INFO  monerosim::orchestrator] Wrote agent registry to "/tmp/monerosim_shared/agent_registry.json", size: 1039 bytes
[2026-02-08T21:10:30Z INFO  monerosim::orchestrator] Wrote public node registry to "/tmp/monerosim_shared/public_nodes.json" with 0 nodes
[2026-02-08T21:10:30Z INFO  monerosim::utils::validation] IP Diversity Analysis:
[2026-02-08T21:10:30Z INFO  monerosim::utils::validation]   Total agents: 5
[2026-02-08T21:10:30Z INFO  monerosim::utils::validation]   Unique /24 subnets: 4 (80.0% of agents)
[2026-02-08T21:10:30Z INFO  monerosim::utils::validation]   Unique first octets: 1
[2026-02-08T21:10:30Z INFO  monerosim] Generated Agent-based Shadow configuration: "/home/lever65/monerosim_dev/monerosim/20260208_tests/08_singleton_relay_shadow/shadow_agents.yaml"
[2026-02-08T21:10:30Z INFO  monerosim] Ready to run Shadow simulation with: shadow "/home/lever65/monerosim_dev/monerosim/20260208_tests/08_singleton_relay_shadow/shadow_agents.yaml"
[2026-02-08T21:10:30Z INFO  monerosim] Configuration parsing completed successfully
OK
[08_singleton_relay] Process counts:
  dnsserver: 1 process(es)
  miner-001: 4 process(es)
  miner-distributor: 1 process(es)
  relay-gateway: 1 process(es)
  simulation-monitor: 1 process(es)
OK
[08_singleton_relay] Agent registry relay entries:
  relay-gateway: wallet=False, script=None, wallet_rpc_port=None [OK]
[08_singleton_relay] Validator:
Traceback (most recent call last):
  File "<string>", line 2, in <module>
    from scripts.ai_config.validator import ConfigValidator
  File "/home/lever65/monerosim_dev/monerosim/scripts/ai_config/__init__.py", line 15, in <module>
    from .generator import ConfigGenerator
  File "/home/lever65/monerosim_dev/monerosim/scripts/ai_config/generator.py", line 23, in <module>
    from ..scenario_parser import parse_scenario, expand_scenario
  File "/home/lever65/monerosim_dev/monerosim/scripts/scenario_parser.py", line 60, in <module>
    from generate_config import parse_duration, calculate_activity_start_times
ModuleNotFoundError: No module named 'generate_config'

--- 07_cli_relay_nodes ---
OK
[2026-02-08T21:10:30Z INFO  monerosim] Starting MoneroSim configuration parser v2
[2026-02-08T21:10:30Z INFO  monerosim] Configuration file: "/home/lever65/monerosim_dev/monerosim/20260208_tests/07_cli_relay_nodes.expanded.yaml"
[2026-02-08T21:10:30Z INFO  monerosim] Output directory: "/home/lever65/monerosim_dev/monerosim/20260208_tests/07_cli_relay_nodes_shadow"
[2026-02-08T21:10:30Z WARN  monerosim::config_loader] Configuration uses deprecated dummy nodes workaround. This will be removed in a future version. Please update to the new format.
[2026-02-08T21:10:30Z INFO  monerosim::config_loader] Loading configuration from: "/home/lever65/monerosim_dev/monerosim/20260208_tests/07_cli_relay_nodes.expanded.yaml"
[2026-02-08T21:10:30Z INFO  monerosim::config_loader] Detected agent-based configuration
[2026-02-08T21:10:30Z INFO  monerosim::config_loader] Configuration validated successfully
[2026-02-08T21:10:30Z INFO  monerosim] Cleaning up previous simulation state
[2026-02-08T21:10:30Z INFO  monerosim] Running in agent-based simulation mode
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned AS-aware IP 3.0.0.10 to agent dnsserver (AS 0, node 0)
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned AS-aware IP 3.0.0.11 to agent miner-001 (AS 0, node 0)
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned AS-aware IP 3.0.0.12 to agent miner-002 (AS 0, node 0)
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned AS-aware IP 3.0.0.13 to agent miner-003 (AS 0, node 0)
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned AS-aware IP 3.0.0.14 to agent miner-004 (AS 0, node 0)
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned AS-aware IP 3.0.0.15 to agent miner-005 (AS 0, node 0)
[2026-02-08T21:10:30Z INFO  monerosim::orchestrator] Created DNS server at 3.0.0.10
[2026-02-08T21:10:30Z INFO  monerosim::topology::distribution] Distributing 15 agents across GML topology '' using Global strategy
[2026-02-08T21:10:30Z INFO  monerosim::topology::distribution] Using global distribution across all regions
[2026-02-08T21:10:30Z INFO  monerosim::topology::distribution] Global distribution summary:
[2026-02-08T21:10:30Z INFO  monerosim::topology::distribution]   NorthAmerica: 3 agents
[2026-02-08T21:10:30Z INFO  monerosim::topology::distribution]   Europe: 3 agents
[2026-02-08T21:10:30Z INFO  monerosim::topology::distribution]   Asia: 3 agents
[2026-02-08T21:10:30Z INFO  monerosim::topology::distribution]   SouthAmerica: 2 agents
[2026-02-08T21:10:30Z INFO  monerosim::topology::distribution]   Africa: 2 agents
[2026-02-08T21:10:30Z INFO  monerosim::topology::distribution]   Oceania: 2 agents
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned AS-aware IP 3.0.0.16 to agent miner-001 (AS 0, node 0)
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned AS-aware IP 2.0.0.10 to agent miner-002 (AS 200, node 200)
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned AS-aware IP 1.0.0.10 to agent miner-003 (AS 500, node 500)
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned AS-aware IP 177.0.0.10 to agent miner-004 (AS 800, node 800)
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned AS-aware IP 41.0.0.10 to agent miner-005 (AS 1000, node 1000)
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned AS-aware IP 101.0.0.10 to agent relay-001 (AS 1100, node 1100)
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned AS-aware IP 4.0.0.10 to agent relay-002 (AS 1, node 1)
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned AS-aware IP 5.0.0.10 to agent relay-003 (AS 201, node 201)
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned AS-aware IP 14.0.0.10 to agent relay-004 (AS 501, node 501)
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned AS-aware IP 179.0.0.10 to agent relay-005 (AS 801, node 801)
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned AS-aware IP 102.0.0.10 to agent user-001 (AS 1001, node 1001)
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned AS-aware IP 103.0.0.10 to agent user-002 (AS 1101, node 1101)
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned AS-aware IP 6.0.0.10 to agent user-003 (AS 2, node 2)
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned AS-aware IP 25.0.0.10 to agent user-004 (AS 202, node 202)
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned AS-aware IP 27.0.0.10 to agent user-005 (AS 502, node 502)
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned AS-aware IP 3.0.0.17 to agent miner-distributor (AS 0, node 0)
[2026-02-08T21:10:30Z INFO  monerosim::ip::allocator] Assigned AS-aware IP 3.0.0.18 to agent simulation-monitor (AS 0, node 0)
[2026-02-08T21:10:30Z INFO  monerosim::orchestrator] Agent registry has 17 agents
[2026-02-08T21:10:30Z INFO  monerosim::orchestrator] Agent registry JSON preview (first 500 chars): {
      "agents": [
        {
          "id": "miner-001",
          "ip_addr": "3.0.0.16",
          "daemon": true,
          "wallet": true,
          "user_script": "agents.autonomous_miner",
          "attributes": {
            "can_receive_distributions": "true",
            "hashrate": "25",
            "is_miner": "true"
          },
          "wallet_rpc_port": 18082,
          "daemon_rpc_port": 18081
        },
        {
          "id": "miner-002",
          "ip_addr": "2.0.0.10",
          "daemon": true,
          "wallet": true,
          "user_script": "agents.
[2026-02-08T21:10:30Z INFO  monerosim::orchestrator] Wrote agent registry to "/tmp/monerosim_shared/agent_registry.json", size: 4997 bytes
[2026-02-08T21:10:30Z INFO  monerosim::orchestrator] Wrote public node registry to "/tmp/monerosim_shared/public_nodes.json" with 0 nodes
[2026-02-08T21:10:30Z INFO  monerosim::utils::validation] No pre-allocated IPs in GML file - all IPs will be assigned dynamically
[2026-02-08T21:10:30Z INFO  monerosim::utils::validation] IP Diversity Analysis:
[2026-02-08T21:10:30Z INFO  monerosim::utils::validation]   Total agents: 18
[2026-02-08T21:10:30Z INFO  monerosim::utils::validation]   Unique /24 subnets: 15 (83.3% of agents)
[2026-02-08T21:10:30Z INFO  monerosim::utils::validation]   Unique first octets: 15
[2026-02-08T21:10:30Z INFO  monerosim] Generated Agent-based Shadow configuration: "/home/lever65/monerosim_dev/monerosim/20260208_tests/07_cli_relay_nodes_shadow/shadow_agents.yaml"
[2026-02-08T21:10:30Z INFO  monerosim] Ready to run Shadow simulation with: shadow "/home/lever65/monerosim_dev/monerosim/20260208_tests/07_cli_relay_nodes_shadow/shadow_agents.yaml"
[2026-02-08T21:10:30Z INFO  monerosim] Configuration parsing completed successfully
OK
[07_cli_relay_nodes] Process counts:
  dnsserver: 1 process(es)
  miner-001: 4 process(es)
  miner-002: 4 process(es)
  miner-003: 4 process(es)
  miner-004: 4 process(es)
  miner-005: 4 process(es)
  miner-distributor: 1 process(es)
  relay-001: 1 process(es)
  relay-002: 1 process(es)
  relay-003: 1 process(es)
  relay-004: 1 process(es)
  relay-005: 1 process(es)
  simulation-monitor: 1 process(es)
  user-001: 3 process(es)
  user-002: 3 process(es)
  user-003: 3 process(es)
  user-004: 3 process(es)
  user-005: 3 process(es)
[07_cli_relay_nodes] relay check... OK
[07_cli_relay_nodes] Validator:
Traceback (most recent call last):
  File "<string>", line 2, in <module>
    from scripts.ai_config.validator import ConfigValidator
  File "/home/lever65/monerosim_dev/monerosim/scripts/ai_config/__init__.py", line 15, in <module>
    from .generator import ConfigGenerator
  File "/home/lever65/monerosim_dev/monerosim/scripts/ai_config/generator.py", line 23, in <module>
    from ..scenario_parser import parse_scenario, expand_scenario
  File "/home/lever65/monerosim_dev/monerosim/scripts/scenario_parser.py", line 60, in <module>
    from generate_config import parse_duration, calculate_activity_start_times
ModuleNotFoundError: No module named 'generate_config'

========================================
TOTAL: 8 tests, 8 passed, 0 failed

